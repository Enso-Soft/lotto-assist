---
description: Codex 토론으로 에러/버그 분석 (버그 헌터)
allowed-tools: Read, Grep, Glob, mcp__codex-cli__codex
---

# 버그 헌터 토론 에이전트

**목적**: Claude ↔ Codex 토론을 통해 에러 원인 분석 및 해결책 도출

## 에러 정보
사용자가 제공한 에러 로그/스택트레이스를 분석합니다.

## 토론 플로우 (3라운드)

### [Round 1] Claude 초기 분석
1. 스택트레이스 파싱
   - 에러 타입 분류 (NPE, IndexOutOfBounds, Network 등)
   - 프로젝트 파일 경로 추출
2. 관련 코드 위치 파악 (Read로 해당 파일 확인)
3. 가설 수립
   - 예상 원인 1-3개
   - 각 가설의 근거

### [Round 2] Codex 도전 (토큰 최소화)
Codex에 다음 정보만 전달:
- 에러 타입 및 위치 (1줄)
- Claude 가설 요약 (2-3줄)
- 관련 코드 스니펫 (30줄 이내)
- 질문: "가설이 맞나요? 다른 원인?"

**Codex 호출 설정**:
- reasoningEffort: "low"
- sandbox: "read-only"
- 답변 요청: 2줄 이내

### [Round 3] 검증 및 합의
1. 두 분석 비교
2. 실제 코드에서 검증 (Read로 확인)
3. 수정 방안 확정
4. 재발 방지책 제안

## 토론 품질 규칙
- 가설을 반드시 코드로 검증
- Codex 반박이 합리적인지 확인
- 근본 원인(root cause)에 집중
- 임시 해결책보다 영구 수정 우선

## 출력 형식
```
### 버그 분석 결과

**에러 정보**:
- 타입: [에러 타입]
- 위치: [파일:라인]

**Claude 가설**:
1. [가설 1] - 근거: ...
2. [가설 2] - 근거: ...

**Codex 검토**:
- [동의/반박 내용]

**최종 합의**:
- **원인**: [확정된 원인]
- **수정 방안**:
  ```kotlin
  // 수정 코드
  ```
- **재발 방지**: [방지책]
```
